<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Monitor APS - Gest√£o Regional</title>
    
    <!-- Tailwind CSS & Chart.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }
        
        .action-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .action-card:active { transform: scale(0.95); }

        .nav-tab-active {
            border-bottom: 3px solid #3b82f6;
            color: #1d4ed8;
            font-weight: 700;
        }

        #modal-overlay { transition: opacity 0.3s ease; }
        #modal-container { transition: transform 0.3s ease, opacity 0.3s ease; }

        .poeps-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; }
        .poeps-table th, .poeps-table td { border: 1px solid #e2e8f0; padding: 12px 10px; text-align: left; vertical-align: top; }
        .poeps-table th { background: #f8fafc; font-weight: 800; text-transform: uppercase; color: #475569; font-size: 0.65rem; letter-spacing: 0.025em; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .chart-container { position: relative; height: 300px; width: 100%; }
        @media (max-width: 640px) {
            .chart-container { height: 250px; }
        }

        .badge-meta { display: inline-block; padding: 2px 8px; border-radius: 6px; font-size: 0.65rem; font-weight: 800; }
        .badge-meta-done { background-color: #dcfce7; color: #166534; }
        .badge-meta-alert { background-color: #fee2e2; color: #991b1b; }
        
        .indicator-mini-card { transition: all 0.2s ease; border: 1px solid #e2e8f0; }
        .indicator-mini-card:hover { border-color: #3b82f6; background-color: #f0f7ff; transform: translateY(-2px); }
        .indicator-mini-card.active { border-color: #3b82f6; background-color: #eff6ff; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }

        .authorship-card {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 1000;
            background-color: white;
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            pointer-events: none;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 640px) {
            .authorship-card {
                bottom: 1rem;
                right: 1rem;
                padding: 0.4rem 0.8rem;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- CARD DE AUTORIA FIXO -->
    <div class="authorship-card">
        <div class="w-2 h-2 bg-blue-600 rounded-full"></div>
        <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Autoria:</span>
        <span class="text-xs font-black text-slate-800">J√∫lia Ribeiro</span>
    </div>

    <!-- SETUP FLOW (Login) -->
    <div id="setup-flow" class="fixed inset-0 bg-slate-900 flex items-center justify-center z-[500] px-4">
        <div class="bg-white p-6 sm:p-10 rounded-[2.5rem] shadow-2xl w-full max-w-md text-center">
            <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-6">M</div>
            <h1 class="text-2xl font-extrabold text-slate-800 mb-2">Monitor APS</h1>
            <p class="text-slate-500 mb-8 text-sm">Painel Integrado de Gest√£o</p>
            
            <div class="space-y-4">
                <select id="setup-muni" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 transition text-sm font-semibold text-slate-700">
                    <option value="cachoeira_de_minas">Cachoeira de Minas - MG</option>
                    <option value="camanducaia" selected>Camanducaia - MG</option>
                    <option value="corrego_bom_jesus">C√≥rrego do Bom Jesus - MG</option>
                    <option value="delfim_moreira">Delfim Moreira - MG</option>
                    <option value="itapeva">Itapeva - MG</option>
                    <option value="pedralva">Pedralva - MG</option>
                </select>
                <input type="password" id="setup-pass" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 transition text-sm" placeholder="Senha de acesso">
                <button onclick="handleLogin()" class="w-full py-4 bg-blue-600 text-white font-bold rounded-2xl hover:bg-blue-700 transition shadow-lg shadow-blue-200">Acessar Painel</button>
                <p id="login-error" class="text-red-500 text-sm font-semibold hidden mt-2">Senha incorreta para este munic√≠pio.</p>
            </div>
        </div>
    </div>

    <!-- MAIN APP STRUCTURE -->
    <div id="app-container" class="hidden flex flex-col h-full">
        <header class="bg-white border-b border-slate-200 flex flex-col shrink-0 z-50">
            <div class="px-4 sm:px-8 flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <div class="w-7 h-7 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-sm">M</div>
                    <span class="font-extrabold text-lg tracking-tight text-slate-900">Monitor APS</span>
                </div>
                <div class="flex items-center gap-2">
                    <span id="display-muni-name" class="hidden sm:block text-xs font-bold text-slate-500 uppercase tracking-widest">--</span>
                    <button onclick="location.reload()" class="p-2 bg-slate-100 rounded-full text-slate-400 hover:text-red-500">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" stroke-width="2"></path></svg>
                    </button>
                </div>
            </div>
            
            <nav class="flex px-2 sm:px-6 overflow-x-auto no-scrollbar border-t border-slate-50">
                <button onclick="setTeamType('esf_eap')" id="tab-esf" class="px-4 py-3 nav-tab-active shrink-0 flex items-center gap-2 text-xs transition-all">
                    <span>ü©∫</span> eSF / eAP
                </button>
                <button onclick="setTeamType('esb')" id="tab-esb" class="px-4 py-3 text-slate-500 shrink-0 flex items-center gap-2 text-xs font-semibold transition-all">
                    <span>ü¶∑</span> Sa√∫de Bucal
                </button>
                <button onclick="setTeamType('emulti')" id="tab-emulti" class="px-4 py-3 text-slate-500 shrink-0 flex items-center gap-2 text-xs font-semibold transition-all">
                    <span>üë•</span> eMulti
                </button>
            </nav>
        </header>

        <div class="flex flex-1 overflow-hidden flex-col md:flex-row">
            <aside id="sidebar" class="w-full md:w-72 bg-white border-b md:border-b-0 md:border-r border-slate-200 flex flex-col overflow-hidden shrink-0">
                <div class="p-4 border-b border-slate-100 bg-slate-50/50 hidden md:block text-[10px] font-black text-slate-400 uppercase tracking-widest">
                    Unidades / Equipes
                </div>
                <div id="team-list" class="flex md:flex-col overflow-x-auto md:overflow-y-auto p-2 md:p-4 gap-1 no-scrollbar"></div>
            </aside>

            <main class="flex-1 overflow-y-auto p-4 sm:p-8 bg-slate-50/50">
                <div class="max-w-6xl mx-auto space-y-6 sm:space-y-10">
                    <div class="pb-4 border-b border-slate-200">
                        <p class="text-[10px] font-black text-blue-600 uppercase tracking-widest mb-1">Painel de A√ß√µes</p>
                        <h2 id="main-title" class="text-2xl sm:text-3xl font-extrabold text-slate-800 tracking-tight">--</h2>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6" id="actions-grid"></div>
                </div>
            </main>
        </div>
    </div>

    <!-- MODAL -->
    <div id="modal-overlay" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[600] flex items-center justify-center opacity-0 pointer-events-none p-0 sm:p-6 lg:p-10">
        <div id="modal-container" class="bg-white w-full h-full sm:rounded-[2rem] lg:rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden scale-95 opacity-0">
            <div class="px-6 py-4 sm:px-10 sm:py-6 border-b border-slate-100 flex justify-between items-center shrink-0">
                <div class="pr-4">
                    <h3 id="modal-title" class="text-lg sm:text-2xl font-black text-slate-800 uppercase tracking-tight truncate">--</h3>
                    <p id="modal-subtitle" class="text-xs text-slate-400 font-medium truncate">--</p>
                </div>
                <button onclick="closeModal()" class="min-w-[40px] h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-xl bg-slate-100 text-slate-400 active:bg-red-100 active:text-red-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12" stroke-width="2.5"></path></svg>
                </button>
            </div>
            <div id="modal-body" class="flex-1 overflow-y-auto p-4 sm:p-10 bg-slate-50/30"></div>
        </div>
    </div>

    <script>
        // --- CONFIGURA√á√ÉO DE MUNIC√çPIOS ---
        const MUNI_CONFIG = {
            "cachoeira_de_minas": { name: "Cachoeira de Minas", pass: "012025" },
            "camanducaia": { name: "Camanducaia", pass: "022025" },
            "corrego_bom_jesus": { name: "C√≥rrego do Bom Jesus", pass: "032025" },
            "delfim_moreira": { name: "Delfim Moreira", pass: "042025" },
            "itapeva": { name: "Itapeva", pass: "052025" },
            "pedralva": { name: "Pedralva", pass: "062025" }
        };

        const ALL_TEAMS_DATA = {
            "cam_esf_centro": { muni: "camanducaia", type: "esf_eap", name: "eSF Centro", indicators: { "C1": {num: 586, den: 2817}, "C2": {num: 120, den: 6}, "C3": {num: 138, den: 3}, "C4": {num: 11525, den: 164}, "C5": {num: 26525, den: 355}, "C6": {num: 32025, den: 543}, "C7": {prev: {num: 162, den: 704}, vax: {num: 25, den: 77}, cons: {num: 93, den: 923}, mamo: {num: 42, den: 328}} }, vinculo: { cadTotal: 2267, cadComplete: 2154, cadIncomplete: 113, cadIndOnly: 68, param: 2500, acompTotal: 2082 } },
            "cam_esf_cruzeiro": { muni: "camanducaia", type: "esf_eap", name: "eSF Cruzeiro", indicators: { "C1": {num: 662, den: 2678}, "C2": {num: 300, den: 11}, "C3": {num: 195, den: 4}, "C4": {num: 16140, den: 204}, "C5": {num: 38875, den: 459}, "C6": {num: 41575, den: 641}, "C7": {prev: {num: 282, den: 815}, vax: {num: 69, den: 120}, cons: {num: 145, den: 1107}, mamo: {num: 56, den: 345}} }, vinculo: { cadTotal: 3026, cadComplete: 2935, cadIncomplete: 91, cadIndOnly: 91, param: 2500, acompTotal: 2896 } },
            "cam_esf_loteamento": { muni: "camanducaia", type: "esf_eap", name: "eSF Loteamento", indicators: { "C1": {num: 944, den: 2678}, "C2": {num: 80, den: 7}, "C3": {num: 534, den: 8}, "C4": {num: 21590, den: 297}, "C5": {num: 43925, den: 616}, "C6": {num: 36875, den: 614}, "C7": {prev: {num: 375, den: 996}, vax: {num: 114, den: 133}, cons: {num: 270, den: 1325}, mamo: {num: 122, den: 413}} }, vinculo: { cadTotal: 3466, cadComplete: 3466, cadIncomplete: 0, cadIndOnly: 0, param: 2500, acompTotal: 2756 } },
            "cam_esf_monte_verde": { muni: "camanducaia", type: "esf_eap", name: "eSF Monte Verde", indicators: { "C1": {num: 406, den: 2286}, "C2": {num: 1480, den: 21}, "C3": {num: 541, den: 13}, "C4": {num: 11385, den: 164}, "C5": {num: 26750, den: 363}, "C6": {num: 30475, den: 552}, "C7": {prev: {num: 287, den: 967}, vax: {num: 57, den: 132}, cons: {num: 47, den: 1254}, mamo: {num: 58, den: 408}} }, vinculo: generateMockVinculo() },
            "cam_esf_ponte_nova": { muni: "camanducaia", type: "esf_eap", name: "eSF Ponte Nova", indicators: { "C1": {num: 532, den: 1243}, "C2": {num: 60, den: 7}, "C3": {num: 247, den: 6}, "C4": {num: 9235, den: 139}, "C5": {num: 21500, den: 347}, "C6": {num: 16925, den: 386}, "C7": {prev: {num: 142, den: 621}, vax: {num: 45, den: 109}, cons: {num: 48, den: 816}, mamo: {num: 21, den: 259}} }, vinculo: generateMockVinculo() },
            "cam_esf_quedas_verdes": { muni: "camanducaia", type: "esf_eap", name: "eSF Quedas Verdes", indicators: { "C1": {num: 377, den: 1408}, "C2": {num: 200, den: 13}, "C3": {num: 355, den: 10}, "C4": {num: 11760, den: 186}, "C5": {num: 29575, den: 422}, "C6": {num: 26925, den: 472}, "C7": {prev: {num: 239, den: 596}, vax: {num: 47, den: 101}, cons: {num: 51, den: 793}, mamo: {num: 83, den: 269}} }, vinculo: generateMockVinculo() },
            "cam_esf_sao_mateus": { muni: "camanducaia", type: "esf_eap", name: "eSF S√£o Mateus", indicators: { "C1": {num: 475, den: 2848}, "C2": {num: 400, den: 10}, "C3": {num: 429, den: 9}, "C4": {num: 16670, den: 197}, "C5": {num: 35925, den: 455}, "C6": {num: 37125, den: 617}, "C7": {prev: {num: 168, den: 655}, vax: {num: 56, den: 99}, cons: {num: 76, den: 845}, mamo: {num: 103, den: 336}} }, vinculo: generateMockVinculo() },
            "cam_esb_cruzeiro": { muni: "camanducaia", type: "esb", name: "eSB Cruzeiro", indicators: { "B1": {num: 256, den: 6112}, "B2": {num: 148, den: 180}, "B3": {num: 114, den: 1434}, "B4": {num: 32, den: 548}, "B5": {num: 698, den: 3354}, "B6": {num: 6, den: 330} } },
            "cam_esb_monte_verde": { muni: "camanducaia", type: "esb", name: "eSB Monte Verde", indicators: { "B1": {num: 24, den: 3190}, "B2": {num: 10, den: 12}, "B3": {num: 4, den: 80}, "B4": {num: 1, den: 292}, "B5": {num: 28, den: 246}, "B6": {num: 0, den: 17} } },
            "cam_emulti_01": { muni: "camanducaia", type: "emulti", name: "eMulti 01", indicators: { "M1": {num: 3169, den: 890}, "M2": {num: 111, den: 2992} } },
            "cam_emulti_02": { muni: "camanducaia", type: "emulti", name: "eMulti 02", indicators: { "M1": {num: 2608, den: 413}, "M2": {num: 6, den: 2222} } },
            "cam_emulti_03": { muni: "camanducaia", type: "emulti", name: "eMulti 03", indicators: { "M1": {num: 808, den: 178}, "M2": {num: 8, den: 1261} } },
        };

        const TECH_METADATA = {
            "esf_eap": {
                "C1": { title: "Mais Acesso √† APS", meta: "50-70%" },
                "C2": { title: "Desenv. Infantil", meta: ">75%" },
                "C3": { title: "Gesta√ß√£o e Puerp√©rio", meta: ">75%" },
                "C4": { title: "Diabetes", meta: ">75%" },
                "C5": { title: "Hipertens√£o", meta: ">75%" },
                "C6": { title: "Pessoa Idosa", meta: ">75%" },
                "C7": { title: "Preven√ß√£o C√¢ncer", meta: ">75%" }
            },
            "esb": {
                "B1": { title: "1¬™ Consulta", meta: ">5%" },
                "B2": { title: "Tratamento Conclu√≠do", meta: "75-100%" },
                "B3": { title: "Raz√£o de Exodontia", meta: "8-10%" },
                "B4": { title: "A√ß√µes Coletivas", meta: ">1%" },
                "B5": { title: "Procedimentos Preventivos", meta: "80-85%" },
                "B6": { title: "Tratamento ART", meta: ">8%" }
            },
            "emulti": {
                "M1": { title: "M√©dia Atendimentos", meta: ">3.0" },
                "M2": { title: "A√ß√µes Interprofissionais", meta: ">5.0%" }
            }
        };

        // --- ATUALIZA√á√ÉO DO PLANEJAMENTO POEPS ---
        const POEPS_PLAN_DATA = [
            { id: 1, ind: "Pr√°ticas Corporais / Atividade F√≠sica", qtd: "2.472 participantes totais no m√™s", acao: "Atividade F√≠sica", resp: "Educador F√≠sico", meta: "Atingir 4% pop SUS dep - 3190", reg: "Ficha Ativ Coletiva" },
            { id: 2, ind: "Educa√ß√£o em Sa√∫de", qtd: "02 por equipe no m√™s", acao: "Sa√∫de Sexual e Sa√∫de do Trabalhador", resp: "Toda a Equipe", meta: "5x o n√∫mero de equipes - 35", reg: "Ficha Ativ Coletiva" },
            { id: 3, ind: "Marcadores de Consumo Alimentar", qtd: "J√Å ATINGIU", acao: "Avaliar durante atendimentos/visitas", resp: "Todos Profissionais APS", meta: "3% pop geral - 783 pessoas", reg: "Marcadores e-SUS" },
            { id: 4, ind: "Comit√™ de Pol√≠ticas de Equidades", qtd: "01 A√á√ÉO OBRIGAT√ìRIA", acao: "Reuni√£o do Comit√™", resp: "COMIT√ä", meta: "1 A√ß√£o Obrigat√≥ria / 1 Essencial", reg: "Ficha Ativ Coletiva" },
            { id: 5, ind: "Acompanhamento Estado Nutricional", qtd: "265 mensura√ß√µes por equipe/m√™s", acao: "Aferir Peso e Altura nos atendimentos", resp: "Todos Profissionais APS", meta: "32% pop geral - 8.351 pessoas", reg: "Prontu√°rio e Ficha Coletiva" },
            { id: 6, ind: "Orienta√ß√£o Sexual e Identidade de G√™nero", qtd: "M√°ximo de atualiza√ß√µes", acao: "Atualizar Cadastros Individuais", resp: "Todos (Monitorar) / ACS (Atualizar)", meta: "Aumentar em 1,75%", reg: "Ficha Cadastro Individual" },
            { id: 7, ind: "Atendimento Pretas e Pardas", qtd: "5% atendimentos totais/m√™s", acao: "Aumentar acesso e atualizar cadastros", resp: "N√≠vel Superior e ACS", meta: "Aumentar em 5%", reg: "Prontu√°rio" },
            { id: 8, ind: "Pr√°ticas Integrativas (PICS)", qtd: "J√Å ATINGIU", acao: "Realizar procedimentos de PICS", resp: "Profissionais Capacitados", meta: "110 procedimentos/quadrimestre", reg: "Evolu√ß√£o no Prontu√°rio" }
        ];

        const POEPS_EVAL_DATA_MUNICIPAL = [
            { id: 1, meta: "1.357", real: "241", status: false, pendente: "1.116" },
            { id: 2, meta: "7", real: "0", status: false, pendente: "7" },
            { id: 3, meta: "203", real: "203", status: true, pendente: "" },
            { id: 4, meta: "1 A√ß√£o Obrigat√≥ria", real: "Pactuada", status: true, pendente: "" },
            { id: 5, meta: "1.770", real: "1.709", status: false, pendente: "61" },
            { id: 6, meta: "Aumentar em 1,2%", real: "Atingido", status: true, pendente: "" },
            { id: 7, meta: "Aumentar em 5%", real: "Verificando", status: null, pendente: "-" },
            { id: 8, meta: "28", real: "164", status: true, pendente: "" }
        ];

        let currentMuniId = "camanducaia";
        let currentTeamType = "esf_eap";
        let currentTeamId = "cam_esf_centro";
        let barChartInstance = null;

        function generateMockIndicators(type) { return { "C1": {num: 450, den: 1200}, "C2": {num: 85, den: 100}, "C3": {num: 40, den: 50}, "C4": {num: 8000, den: 150}, "C5": {num: 15000, den: 300}, "C6": {num: 18000, den: 400}, "C7": {prev: {num: 150, den: 600}, vax: {num: 40, den: 100}, cons: {num: 80, den: 800}, mamo: {num: 30, den: 300}} }; }
        function generateMockVinculo() { return { cadTotal: 2500, cadComplete: 2300, cadIncomplete: 200, cadIndOnly: 150, param: 2500, acompTotal: 2100 }; }

        function handleLogin() {
            const muniId = document.getElementById('setup-muni').value;
            const pass = document.getElementById('setup-pass').value;
            if (MUNI_CONFIG[muniId] && pass === MUNI_CONFIG[muniId].pass) {
                currentMuniId = muniId;
                document.getElementById('setup-flow').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                document.getElementById('display-muni-name').innerText = MUNI_CONFIG[muniId].name;
                setTeamType('esf_eap');
            } else { document.getElementById('login-error').classList.remove('hidden'); }
        }

        function setTeamType(type) {
            currentTeamType = type;
            document.querySelectorAll('nav button').forEach(b => { b.classList.remove('nav-tab-active'); b.classList.add('text-slate-500'); });
            const activeTab = document.getElementById(`tab-${type.replace('esf_eap', 'esf')}`);
            if(activeTab) { activeTab.classList.add('nav-tab-active'); activeTab.classList.remove('text-slate-500'); }
            renderTeamList();
            renderActionButtons();
        }

        function renderTeamList() {
            const list = document.getElementById('team-list');
            list.innerHTML = '';
            const teams = Object.keys(ALL_TEAMS_DATA).filter(id => ALL_TEAMS_DATA[id].muni === currentMuniId && ALL_TEAMS_DATA[id].type === currentTeamType);
            teams.forEach(id => {
                const btn = document.createElement('button');
                btn.onclick = () => selectTeam(id);
                btn.id = `side-${id}`;
                btn.className = "flex-none md:flex-shrink-0 md:w-full text-left px-4 py-3 rounded-xl text-xs font-semibold transition-all whitespace-nowrap md:whitespace-normal mb-1 border md:border-0 border-slate-100";
                btn.innerText = ALL_TEAMS_DATA[id].name;
                list.appendChild(btn);
            });
            if (teams.length > 0) selectTeam(teams[0]);
        }

        function selectTeam(id) {
            document.querySelectorAll('#team-list button').forEach(b => { b.className = "flex-none md:flex-shrink-0 md:w-full text-left px-4 py-3 rounded-xl text-xs font-semibold transition-all whitespace-nowrap md:whitespace-normal mb-1 border md:border-0 border-slate-100 text-slate-600 bg-white"; });
            const activeBtn = document.getElementById(`side-${id}`);
            if (activeBtn) activeBtn.className = "flex-none md:flex-shrink-0 md:w-full text-left px-4 py-3 rounded-xl text-xs font-bold bg-blue-600 text-white shadow-md mb-1 whitespace-nowrap md:whitespace-normal";
            currentTeamId = id;
            document.getElementById('main-title').innerText = ALL_TEAMS_DATA[id].name;
        }

        function renderActionButtons() {
            const grid = document.getElementById('actions-grid');
            const commonActions = [{ id: 'indicadores', icon: 'üìä', title: 'Indicadores de Qualidade', color: 'border-blue-200 hover:bg-blue-50' }];
            const esfActions = [
                { id: 'vinculo', icon: 'üîó', title: 'V√≠nculo e Acompanhamento', color: 'border-indigo-200 hover:bg-indigo-50' },
                { id: 'poeps-plan', icon: 'üóìÔ∏è', title: 'POEPS - Planejamento Mensal', color: 'border-emerald-200 hover:bg-emerald-50' },
                { id: 'poeps-eval', icon: 'üìã', title: 'POEPS - Avalia√ß√£o M√™s Anterior', color: 'border-orange-200 hover:bg-orange-50' },
                { id: 'pse', icon: 'üè´', title: 'PSE', color: 'border-teal-200 hover:bg-teal-50' }
            ];
            const allActions = currentTeamType === 'esf_eap' ? [...commonActions, ...esfActions] : commonActions;
            grid.innerHTML = allActions.map(act => `
                <button onclick="openModal('${act.id}')" class="action-card bg-white p-6 rounded-[2rem] border ${act.color} shadow-sm flex items-center gap-4 text-left">
                    <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-2xl shadow-sm border border-slate-50">${act.icon}</div>
                    <span class="text-sm font-bold text-slate-700 leading-tight">${act.title}</span>
                </button>
            `).join('');
        }

        function calculateScore(code, teamId) {
            const data = ALL_TEAMS_DATA[teamId].indicators[code];
            if (!data) return 0;
            if (code === 'C1' || code.startsWith('B') || code === 'M2') return (data.num / data.den) * 100;
            if (code === 'M1') return (data.num / data.den);
            if (code === 'C7') return ((data.prev.num / data.prev.den) * 20) + ((data.vax.num / data.vax.den) * 30) + ((data.cons.num / (data.cons.den || 1000)) * 30) + ((data.mamo.num / data.mamo.den) * 20);
            return (data.num / data.den);
        }

        function getClassification(score, code) {
            const azul = "#2563eb"; const verde = "#16a34a"; const amarelo = "#ca8a04"; const vermelho = "#dc2626";
            if (code.startsWith('B')) {
                if(code === 'B1') { if(score > 5) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 3) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 1) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
                if(code === 'B2') { if(score > 75) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 50) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 25) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
                if(code === 'B3') { if(score >= 8 && score < 10) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score >= 10 && score < 12) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score >= 12 && score < 14) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
                if(code === 'B4') { if(score > 1) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 0.5) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 0.25) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
                if(code === 'B5') { if(score >= 80 && score <= 85) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score >= 60 && score < 80) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score >= 40 && score < 60) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
                if(code === 'B6') { if(score > 8) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 6) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 3) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
            }
            if (code === 'M1') { if(score > 3) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 2) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 1) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
            if (code === 'M2') { if(score > 5) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 2.5) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 1) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
            if (code === 'C1') { if(score > 50) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" }; if(score > 30) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" }; if(score > 10) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" }; return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" }; }
            if (score > 75) return { label: "√ìtimo", color: "text-blue-600", hex: azul, bg: "bg-blue-50", border: "border-blue-200" };
            if (score > 50) return { label: "Bom", color: "text-green-600", hex: verde, bg: "bg-green-50", border: "border-green-200" };
            if (score > 25) return { label: "Suficiente", color: "text-yellow-600", hex: amarelo, bg: "bg-yellow-50", border: "border-yellow-200" };
            return { label: "Regular", color: "text-red-600", hex: vermelho, bg: "bg-red-50", border: "border-red-200" };
        }

        function openModal(module) {
            document.getElementById('modal-overlay').classList.remove('pointer-events-none', 'opacity-0');
            document.getElementById('modal-container').classList.remove('scale-95', 'opacity-0');
            if (module === 'indicadores') renderIndicadores();
            else if (module === 'vinculo') renderVinculo();
            else if (module === 'poeps-plan') renderPoepsPlan();
            else if (module === 'poeps-eval') renderPoepsEval();
            else if (module === 'pse') renderPSE();
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.add('opacity-0', 'pointer-events-none');
            document.getElementById('modal-container').classList.add('scale-95', 'opacity-0');
            if (barChartInstance) barChartInstance.destroy();
        }

        function renderIndicadores() {
            const team = ALL_TEAMS_DATA[currentTeamId]; if (!team || !team.indicators) return;
            const codes = Object.keys(team.indicators);
            document.getElementById('modal-title').innerText = "Indicadores de Qualidade";
            document.getElementById('modal-subtitle').innerText = team.name;
            document.getElementById('modal-body').innerHTML = `<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6"><div class="bg-white p-4 rounded-3xl border shadow-sm"><div class="chart-container"><canvas id="barChart"></canvas></div></div><div class="grid grid-cols-2 gap-3 h-fit">${codes.map(c => { const score = calculateScore(c, currentTeamId); const cls = getClassification(score, c); return `<div onclick="showDetail('${c}')" id="card-${c}" class="indicator-mini-card bg-white p-3 rounded-2xl flex flex-col justify-center cursor-pointer"><span class="text-[9px] font-black text-slate-400 uppercase">${c}</span><span class="text-xl font-black ${cls.color}">${(c === 'M1' || c === 'B3' || c === 'B5') ? score.toFixed(2) : score.toFixed(1) + '%'}</span><span class="text-[8px] font-bold uppercase ${cls.color}">${cls.label}</span></div>`; }).join('')}</div></div><div id="detail-area" class="transition-all duration-300"></div>`;
            setTimeout(() => {
                const scores = codes.map(c => calculateScore(c, currentTeamId));
                const colors = codes.map(c => getClassification(calculateScore(c, currentTeamId), c).hex);
                barChartInstance = new Chart(document.getElementById('barChart'), {
                    type: 'bar', plugins: [ChartDataLabels],
                    data: { labels: codes, datasets: [{ data: scores, backgroundColor: colors, borderRadius: 6 }] },
                    options: { 
                        maintainAspectRatio: false, 
                        plugins: { legend: { display: false }, datalabels: { anchor: 'end', align: 'top', offset: 2, formatter: (value, context) => { const code = context.chart.data.labels[context.dataIndex]; return (code === 'M1' || code === 'B3' || code === 'B5') ? value.toFixed(2) : value.toFixed(1) + '%'; }, font: { weight: 'bold', size: 10 }, color: (context) => getClassification(context.dataset.data[context.dataIndex], context.chart.data.labels[context.dataIndex]).hex } }, 
                        scales: { y: { beginAtZero: true, max: 115, ticks: { stepSize: 20 } }, x: { grid: { display: false } } } 
                    }
                });
                showDetail(codes[0]);
            }, 100);
        }

        function showDetail(code) {
            const area = document.getElementById('detail-area'); const team = ALL_TEAMS_DATA[currentTeamId]; const data = team.indicators[code]; const metaInfo = TECH_METADATA[currentTeamType][code]; const score = calculateScore(code, currentTeamId); const cls = getClassification(score, code);
            document.querySelectorAll('.indicator-mini-card').forEach(c => c.classList.remove('active'));
            const activeCard = document.getElementById(`card-${code}`); if(activeCard) activeCard.classList.add('active');
            if (code === 'C7') { area.innerHTML = `<div class="bg-white p-6 rounded-[2rem] border shadow-sm space-y-4"><div class="flex items-center justify-between border-b pb-4"><h4 class="text-sm font-black text-slate-800 uppercase">${code} - ${metaInfo.title}</h4><span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-[10px] font-bold">META: ${metaInfo.meta}</span></div><div class="grid grid-cols-2 sm:grid-cols-4 gap-3"><div class="p-3 ${cls.bg} rounded-2xl border ${cls.border}"><p class="text-[8px] font-black ${cls.color} opacity-70 uppercase mb-1">Preventivo</p><p class="text-sm font-bold text-slate-700">${data.prev.num} / ${data.prev.den}</p></div><div class="p-3 ${cls.bg} rounded-2xl border ${cls.border}"><p class="text-[8px] font-black ${cls.color} opacity-70 uppercase mb-1">Vacina HPV</p><p class="text-sm font-bold text-slate-700">${data.vax.num} / ${data.vax.den}</p></div><div class="p-3 ${cls.bg} rounded-2xl border ${cls.border}"><p class="text-[8px] font-black ${cls.color} opacity-70 uppercase mb-1">Consulta</p><p class="text-sm font-bold text-slate-700">${data.cons.num} / ${data.cons.den}</p></div><div class="p-3 ${cls.bg} rounded-2xl border ${cls.border}"><p class="text-[8px] font-black ${cls.color} opacity-70 uppercase mb-1">Mamografia</p><p class="text-sm font-bold text-slate-700">${data.mamo.num} / ${data.mamo.den}</p></div></div></div>`; }
            else { area.innerHTML = `<div class="bg-white p-6 rounded-[2rem] border shadow-sm space-y-6"><div class="flex items-center justify-between"><h4 class="text-sm font-black text-slate-800 uppercase">${code} - ${metaInfo.title}</h4><span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-[10px] font-bold">META: ${metaInfo.meta}</span></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="flex items-center gap-4 p-4 ${cls.bg} rounded-2xl border ${cls.border}"><div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center font-bold shadow-sm" style="color: ${cls.hex}">N</div><div><p class="text-[9px] font-black opacity-70 uppercase" style="color: ${cls.hex}">Numerador</p><p class="text-xl font-black text-slate-800">${data.num}</p></div></div><div class="flex items-center gap-4 p-4 ${cls.bg} rounded-2xl border ${cls.border}"><div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center font-bold shadow-sm" style="color: ${cls.hex}">D</div><div><p class="text-[9px] font-black opacity-70 uppercase" style="color: ${cls.hex}">Denominador</p><p class="text-xl font-black text-slate-800">${data.den}</p></div></div></div><div class="p-4 bg-white rounded-2xl flex items-center justify-between border-2" style="border-color: ${cls.hex}"><div class="flex flex-col"><span class="text-[9px] font-black uppercase tracking-widest" style="color: ${cls.hex}">Resultado do Per√≠odo</span><span class="text-2xl font-black text-slate-800">${(code === 'M1' || code === 'B3' || code === 'B5') ? score.toFixed(2) : score.toFixed(1) + '%'}</span></div><div class="text-right"><span class="text-[9px] font-black text-slate-400 uppercase block">Classifica√ß√£o</span><span class="text-sm font-bold ${cls.color}">${cls.label}</span></div></div></div>`; }
        }

        function renderVinculo() {
            const team = ALL_TEAMS_DATA[currentTeamId]; if (!team || !team.vinculo) return; const data = team.vinculo;
            document.getElementById('modal-title').innerText = "V√≠nculo e Acompanhamento";
            document.getElementById('modal-body').innerHTML = `<div class="space-y-4"><div class="bg-white p-6 rounded-3xl border shadow-sm"><h4 class="text-xs font-black text-indigo-500 uppercase tracking-widest mb-4 border-b pb-2">Dados de Cadastro</h4><div class="space-y-2"><div class="flex justify-between text-xs"><span>Total de Cadastros</span><span class="font-bold">${data.cadTotal}</span></div><div class="flex justify-between text-xs text-green-600"><span>Completos e Atualizados</span><span class="font-bold">${data.cadComplete}</span></div><div class="flex justify-between text-xs text-red-500"><span>Incompletos e/ou Desatualizados</span><span class="font-bold">${data.cadIncomplete}</span></div></div></div><div class="bg-white p-6 rounded-3xl border shadow-sm"><h4 class="text-xs font-black text-emerald-500 uppercase tracking-widest mb-4 border-b pb-2">Acompanhamento</h4><div class="flex justify-between text-xs"><span>Pessoas Acompanhadas</span><span class="font-bold">${data.acompTotal}</span></div><div class="flex justify-between text-xs"><span>Par√¢metro Populacional</span><span class="font-bold">${data.param}</span></div></div></div>`;
        }

        function renderPoepsPlan() {
            document.getElementById('modal-title').innerText = "POEPS - Planejamento Mensal";
            document.getElementById('modal-subtitle').innerText = "Munic√≠pio: Camanducaia - MG";
            document.getElementById('modal-body').innerHTML = `
                <div class="bg-white rounded-[2rem] border shadow-sm overflow-hidden mb-6">
                    <div class="p-4 bg-red-600 text-white flex flex-col sm:flex-row items-center justify-between gap-2">
                        <div class="flex items-center gap-2">
                            <span class="text-lg">üéóÔ∏è</span>
                            <span class="text-xs font-black tracking-widest uppercase">CAMPANHA DO M√äS: Dezembro Vermelho - HIV/Aids</span>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto no-scrollbar">
                        <table class="poeps-table min-w-[1200px]">
                            <thead>
                                <tr>
                                    <th class="w-[50px] text-center">IND</th>
                                    <th class="w-[200px]">INDICADOR</th>
                                    <th class="w-[150px]">QUANTIDADE</th>
                                    <th class="w-[250px]">O QUE FAZER NO M√äS (A√á√ÉO)?</th>
                                    <th class="w-[180px]">RESPONS√ÅVEL</th>
                                    <th class="w-[180px]">META NO QUADRIMESTRE</th>
                                    <th class="w-[150px]">REGISTRO</th>
                                </tr>
                            </thead>
                            <tbody class="text-slate-600">
                                <tr>
                                    <td class="font-black text-center">1</td>
                                    <td class="font-bold">Pr√°ticas Corporais / Atividade F√≠sica</td>
                                    <td>2.472 participantes totais no m√™s</td>
                                    <td>Atividade F√≠sica</td>
                                    <td>Educador F√≠sico</td>
                                    <td>Atingir 4% da pop SUS dependente por m√™s - 3190</td>
                                    <td>Ficha Ativ Coletiva e-SUS</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">2</td>
                                    <td class="font-bold">Educa√ß√£o em Sa√∫de</td>
                                    <td>02 por equipe no m√™s</td>
                                    <td>Sa√∫de sexual e Reprodutiva e Promo√ß√£o da Sa√∫de do trabalhador</td>
                                    <td>Toda a Equipe</td>
                                    <td>5x o n√∫mero de equipes - 35</td>
                                    <td>Ficha Ativ Coletiva e-SUS</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">3</td>
                                    <td class="font-bold">Registros de marcadores de consumo alimentar</td>
                                    <td><span class="badge-meta badge-meta-done">J√Å ATINGIU</span></td>
                                    <td>Avaliar durante os atendimentos/visitas</td>
                                    <td>TODOS os profissionais da APS</td>
                                    <td>Atingir 3% da popula√ß√£o geral - 783 pessoas</td>
                                    <td>Marcadores e-SUS</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">4</td>
                                    <td class="font-bold">Comit√™ de Pol√≠ticas de Equidades</td>
                                    <td class="text-red-600 font-black">01 A√á√ÉO OBRIGAT√ìRIA</td>
                                    <td>Reuni√£o do Comit√™</td>
                                    <td>COMIT√ä</td>
                                    <td>1 A√ß√£o Obrigat√≥ria e 1 A√ß√£o Essencial</td>
                                    <td>Ficha Ativ Coletiva (Ata/Fotos)</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">5</td>
                                    <td class="font-bold">Acompanhamento do estado nutricional</td>
                                    <td>Realizar 265 mensura√ß√µes por equipe no m√™s</td>
                                    <td>Aferir Peso e Altura nos atendimentos</td>
                                    <td>TODOS os profissionais da APS</td>
                                    <td>Atingir 32% da popula√ß√£o geral - 8.351 pessoas</td>
                                    <td>Prontu√°rio e Ficha Ativ Coletiva</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">6</td>
                                    <td class="font-bold">Preenchimentos de "Orienta√ß√£o Sexual" e "G√™nero"</td>
                                    <td>Realizar o m√°ximo de atualiza√ß√µes</td>
                                    <td>Atualizar Cadastros Individuais</td>
                                    <td>TODOS (Monitorar) / ACS (Atualizar)</td>
                                    <td>Aumentar em 1,75%</td>
                                    <td>Ficha Cadastro Individual</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">7</td>
                                    <td class="font-bold">Atendimento Pessoas Pretas e Pardas</td>
                                    <td>5% dos atendimentos totais no m√™s</td>
                                    <td>Aumentar acesso e atualizar cadastros</td>
                                    <td>Prof. de N√≠vel Superior e ACS</td>
                                    <td>Aumentar atendimentos em 5%</td>
                                    <td>Atendimento no Prontu√°rio</td>
                                </tr>
                                <tr>
                                    <td class="font-black text-center">8</td>
                                    <td class="font-bold">Pr√°ticas Integrativas Complementares</td>
                                    <td><span class="badge-meta badge-meta-done">J√Å ATINGIU</span></td>
                                    <td>Realizar procedimentos de PICS</td>
                                    <td>Profissionais capacitados em PICS</td>
                                    <td>110 procedimentos no quadrimestre</td>
                                    <td>Registro no prontu√°rio</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="mt-4 p-4 bg-slate-100 rounded-2xl text-[10px] text-slate-500 italic">
                    * A campanha do m√™s pode ser utilizada como tema trabalhado na a√ß√£o de Educa√ß√£o em Sa√∫de da Equipe!!
                </div>`;
        }

        function renderPoepsEval() {
            document.getElementById('modal-title').innerText = "POEPS - Avalia√ß√£o M√™s Anterior";
            document.getElementById('modal-subtitle').innerText = "Resultados Regionais - Novembro/2025";
            document.getElementById('modal-body').innerHTML = `
                <div class="bg-white rounded-3xl border shadow-sm overflow-hidden mb-6">
                    <div class="p-4 bg-orange-600 text-white flex items-center gap-2"><span class="text-lg">üìä</span><span class="text-xs font-black tracking-widest uppercase">Monitoramento de Resultados</span></div>
                    <div class="overflow-x-auto no-scrollbar">
                        <table class="poeps-table min-w-[900px]">
                            <thead><tr><th>ID</th><th>META</th><th>REALIZADO</th><th>CUMPRIU?</th><th>PENDENTE</th></tr></thead>
                            <tbody class="text-slate-600">
                                ${POEPS_EVAL_DATA_MUNICIPAL.map(d => `<tr><td class="font-black text-center">${d.id}</td><td class="font-bold">${d.meta}</td><td>${d.real}</td><td class="text-center font-black ${d.status === null ? 'text-slate-400' : (d.status ? 'text-green-600' : 'text-red-600')}">${d.status === null ? '--' : (d.status ? 'SIM' : 'N√ÉO')}</td><td class="font-bold text-red-600">${d.pendente}</td></tr>`).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>`;
        }

        function renderPSE() {
            const school = PSE_SCHOOLS[currentTeamId] || "Escola Pactuada Regional";
            document.getElementById('modal-title').innerText = "Programa Sa√∫de na Escola";
            document.getElementById('modal-body').innerHTML = `<div class="bg-white p-6 rounded-3xl border shadow-sm space-y-4"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-teal-100 rounded-xl flex items-center justify-center text-xl">üè´</div><div><h4 class="text-sm font-bold text-slate-800">${school}</h4><p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Unidade Educacional Pactuada</p></div></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="p-4 bg-slate-50 rounded-2xl border border-slate-100"><p class="text-[10px] font-black text-slate-400 uppercase mb-1">Respons√°vel</p><p class="text-xs font-bold text-slate-700">Equipe de Sa√∫de Local</p></div><div class="p-4 bg-slate-50 rounded-2xl border border-slate-100"><p class="text-[10px] font-black text-slate-400 uppercase mb-1">Registro</p><p class="text-xs font-bold text-slate-700">Ficha de Atividade Coletiva</p></div></div></div>`;
        }
        window.onload = () => document.getElementById('setup-pass').focus();
        document.getElementById('setup-pass').addEventListener('keypress', (e) => { if (e.key === 'Enter') handleLogin(); });
    </script>
</body>
</html>